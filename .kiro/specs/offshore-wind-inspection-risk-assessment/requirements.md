# 需求文档

## 简介

本文档定义了海上风电场出海巡检风险评估系统的需求。该系统基于大型语言模型（LLM）和检索增强生成（RAG）技术，通过整合多源数据、专业知识库和多个专业子智能体，为海上风电场的出海巡检任务提供全面、智能的风险评估和决策支持。系统旨在提高巡检作业的安全性、合规性和效率，减少人为失误和安全事故。

## 术语表

- **系统（System）**：海上风电场出海巡检风险评估系统
- **LLM（Large Language Model）**：大型语言模型，系统的认知核心
- **RAG（Retrieval-Augmented Generation）**：检索增强生成模块
- **知识库（Knowledge Base）**：包含法规、标准、操作手册、历史案例和设备知识的向量数据库
- **子智能体（Sub-Agent）**：执行特定分析任务的专业模块
- **AIS（Automatic Identification System）**：船舶自动识别系统
- **巡检任务（Inspection Task）**：用户输入的待执行海上风电场维护或检查任务
- **风险评估报告（Risk Assessment Report）**：系统输出的结构化风险分析文档
- **合规性（Compliance）**：符合相关法规和行业标准的要求
- **FMECA（Failure Mode, Effects and Criticality Analysis）**：故障模式、影响与危害性分析

## 需求

### 需求 1：数据输入与采集

**用户故事：** 作为系统管理员，我希望系统能够接收和整合多种数据源，以便为风险评估提供全面的数据基础。

#### 验收标准

1. 当用户输入巡检任务描述时，系统应当接收并解析任务信息
2. 系统应当持续接收实时气象预报数据
3. 系统应当持续接收海况数据，包括浪高和流速信息
4. 系统应当持续接收船舶AIS数据
5. 系统应当持续接收现场人员生命体征监测数据
6. 系统应当访问风机设备台账数据
7. 系统应当访问历史维修保养记录
8. 系统应当访问备品备件库存信息
9. 系统应当访问运维人员资质与培训记录
10. 系统应当访问历史巡检报告与事故报告

### 需求 2：知识库构建与管理

**用户故事：** 作为知识管理员，我希望系统拥有一个专业的知识库，以便为风险评估提供可信的参考依据。

#### 验收标准

1. 系统应当维护一个向量数据库作为知识库
2. 知识库应当包含《NB/T 11768-2025》等所有相关国家及行业标准的全文内容
3. 知识库应当包含设备操作规程（SOP）文档
4. 知识库应当包含安全工作票制度文档
5. 知识库应当包含应急预案文档
6. 知识库应当包含历史安全事故案例
7. 知识库应当包含未遂事件记录
8. 知识库应当包含良好实践报告
9. 知识库应当包含风机设计文档
10. 知识库应当包含故障模式与影响分析（FMECA）报告

### 需求 3：任务理解与意图识别

**用户故事：** 作为运维人员，我希望系统能够准确理解我输入的巡检任务，以便进行针对性的风险评估。

#### 验收标准

1. 当用户输入巡检任务描述时，LLM应当解析任务的核心内容
2. 系统应当识别任务涉及的风机编号
3. 系统应当识别任务的作业类型（如更换部件、例行检查、故障维修等）
4. 系统应当识别任务涉及的设备部件
5. 系统应当将任务分解为可评估的子任务

### 需求 4：知识检索与上下文增强

**用户故事：** 作为系统，我需要从知识库中检索相关信息，以便为LLM提供准确的上下文支持。

#### 验收标准

1. 当LLM接收到任务后，RAG模块应当在知识库中检索相关法规条款
2. RAG模块应当检索类似的历史案例
3. RAG模块应当检索设备操作风险提示
4. RAG模块应当检索相关的安全规程
5. RAG模块应当将检索到的信息片段作为上下文提供给LLM

### 需求 5：天气与环境风险分析

**用户故事：** 作为安全管理员，我希望系统能够分析气象和海况条件，以便评估环境风险。

#### 验收标准

1. 当执行风险评估时，天气分析子智能体应当调用气象API获取未来72小时的天气预报
2. 天气分析子智能体应当识别适合巡检的时间窗口
3. 天气分析子智能体应当评估雷电风险等级
4. 天气分析子智能体应当评估大风风险等级
5. 天气分析子智能体应当评估降水风险等级
6. 天气分析子智能体应当评估浪高对作业的影响
7. 天气分析子智能体应当评估流速对航行的影响

### 需求 6：船舶与航路风险分析

**用户故事：** 作为船舶调度员，我希望系统能够分析航行和靠泊风险，以便制定安全的航行计划。

#### 验收标准

1. 当执行风险评估时，船舶与航路子智能体应当分析海图数据
2. 船舶与航路子智能体应当分析AIS数据以识别周边船舶
3. 船舶与航路子智能体应当结合海况数据评估航行风险
4. 船舶与航路子智能体应当评估靠泊操作的风险等级
5. 船舶与航路子智能体应当识别潜在的碰撞风险

### 需求 7：人员状态与资质评估

**用户故事：** 作为人力资源管理员，我希望系统能够评估运维人员的适任性，以便确保人员配置符合要求。

#### 验收标准

1. 当执行风险评估时，人员状态子智能体应当验证指定运维人员的资质证书有效性
2. 人员状态子智能体应当检查人员是否具备任务所需的专业技能
3. 人员状态子智能体应当评估人员的健康状况
4. 人员状态子智能体应当基于历史工作时长计算人员疲劳度
5. 人员状态子智能体应当识别人员配置的不足之处

### 需求 8：合规性检查

**用户故事：** 作为合规官，我希望系统能够自动检查任务计划的合规性，以便确保所有操作符合法规要求。

#### 验收标准

1. 当执行风险评估时，合规检查子智能体应当对照知识库中的法规标准
2. 合规检查子智能体应当逐条检查任务计划是否符合《NB/T 11768-2025》要求
3. 合规检查子智能体应当检查是否符合其他相关国家及行业标准
4. 合规检查子智能体应当识别任何不合规项
5. 合规检查子智能体应当在报告中明确引证法规条款来源

### 需求 9：风险量化评估

**用户故事：** 作为风险分析师，我希望系统能够对各项风险进行量化评分，以便进行客观的风险比较和决策。

#### 验收标准

1. 当执行风险评估时，系统应当调用风险量化模型
2. 风险量化模型应当对环境风险进行数值评分
3. 风险量化模型应当对设备风险进行数值评分
4. 风险量化模型应当对人员风险进行数值评分
5. 风险量化模型应当对操作风险进行数值评分
6. 系统应当计算综合风险评分

### 需求 10：风险评估报告生成

**用户故事：** 作为运维主管，我希望系统能够生成结构化的风险评估报告，以便快速了解任务风险并做出决策。

#### 验收标准

1. 当所有子智能体完成分析后，LLM应当整合所有分析结果
2. 系统应当生成结构化的《出海巡检风险评估报告》
3. 报告应当包含任务基本信息章节
4. 报告应当包含综合风险等级（低、中、高、极高）
5. 报告应当包含综合风险评分
6. 报告应当包含环境风险分项分析
7. 报告应当包含设备风险分项分析
8. 报告应当包含人员风险分项分析
9. 报告应当包含操作风险分项分析
10. 报告中的每项风险分析应当明确引证来源（如"根据NB/T 11768-2025第X条"）

### 需求 11：关键风险识别与高亮

**用户故事：** 作为现场作业负责人，我希望系统能够突出显示关键风险点，以便重点关注最重要的安全事项。

#### 验收标准

1. 当生成风险评估报告时，系统应当识别所有高风险项
2. 系统应当在报告中高亮显示关键风险点
3. 系统应当按风险严重程度对关键风险点进行排序
4. 系统应当为每个关键风险点提供简明的描述

### 需求 12：决策建议生成

**用户故事：** 作为决策者，我希望系统能够提供明确的决策建议，以便快速做出是否执行任务的判断。

#### 验收标准

1. 当生成风险评估报告时，系统应当基于综合风险评估结果生成决策建议
2. 若综合风险等级为低或中，系统应当建议执行任务
3. 若存在可通过延迟解决的环境风险，系统应当建议延迟任务并说明建议的延迟时长
4. 若存在人员资质或状态问题，系统应当建议更换人员并说明所需资质
5. 若存在设备或应急准备不足，系统应当建议增加相应的设备或物资
6. 若综合风险等级为极高且无法有效缓解，系统应当建议取消任务

### 需求 13：风险控制与缓解措施

**用户故事：** 作为安全工程师，我希望系统能够提供具体的风险控制措施，以便在执行任务时降低风险。

#### 验收标准

1. 当生成风险评估报告时，系统应当为每个识别的风险提供相应的控制措施
2. 系统应当生成风险控制与缓解措施清单
3. 缓解措施应当具体、可操作
4. 缓解措施应当基于知识库中的最佳实践和标准要求
5. 系统应当按风险优先级排序缓解措施清单

### 需求 14：报告可追溯性

**用户故事：** 作为审计员，我希望风险评估报告中的所有结论都有明确的依据来源，以便进行审计和验证。

#### 验收标准

1. 当生成风险评估报告时，系统应当为每项风险分析标注数据来源
2. 系统应当为引用的法规条款提供完整的标准编号和条款号
3. 系统应当为引用的历史案例提供案例编号或日期
4. 系统应当记录使用的气象数据的时间戳和来源
5. 系统应当记录参与评估的人员信息和时间戳

### 需求 15：系统可扩展性

**用户故事：** 作为系统架构师，我希望系统具有良好的可扩展性，以便未来能够添加新的数据源、子智能体或评估维度。

#### 验收标准

1. 系统应当采用模块化架构设计
2. 系统应当支持动态添加新的数据源接口
3. 系统应当支持动态注册新的子智能体
4. 系统应当支持扩展知识库内容而无需修改核心代码
5. 系统应当提供标准化的子智能体接口规范
